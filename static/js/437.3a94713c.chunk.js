"use strict";(self.webpackChunkdetoxweb=self.webpackChunkdetoxweb||[]).push([[437,209],{4596:(t,i,e)=>{e.d(i,{H:()=>d,R:()=>r});var s=e(4245),a=e(6398);class r{constructor(t){this.Bg=t}uc(){(0,s.i)(this.Dc)&&this.xj()}vc(){(0,s.d)(this.Dc)&&window.cancelAnimationFrame(this.Dc),this.Dc=void 0}xj(){this.Dc=window.requestAnimationFrame((()=>{(0,s.i)(this.Dc)||(this.Bg(),this.xj())}))}}class h{constructor(t,i){this.Wb=t,this.zi=i,this.qi=(0,s.u)(),this.Pi=!1,this.Ri=!1,this.Si=!1,this.Qi=new r(this.Vi.bind(this)),this.Wi=void 0,this.pj=void 0,this.Xi(),(0,s.e)(this.Yi.bind(this)),(0,s.o)(this.si.bind(this))}get Ba(){return this.Wb.media}get Wc(){return this.zi.delegate}si(){this.Ri=!1,this.Si=!1,this.Qi.vc(),this.qi.empty()}Vi(){const t=this.Wb.currentTime;this.zi.$state.currentTime()!==t&&this.Oi(t)}Xi(){this.Ni("loadstart",this.Kf),this.Ni("abort",this.Ui),this.Ni("emptied",this.Zi),this.Ni("error",this.od)}_i(){this.Ri||(this.qi.add(this.Ni("loadeddata",this.$i),this.Ni("loadedmetadata",this.aj),this.Ni("canplay",this.hd),this.Ni("canplaythrough",this.bj),this.Ni("durationchange",this.cj),this.Ni("play",this.qa),this.Ni("progress",this.dj),this.Ni("stalled",this.ej),this.Ni("suspend",this.fj)),this.Ri=!0)}gj(){this.Si||(this.qi.add(this.Ni("pause",this.ra),this.Ni("playing",this.hj),this.Ni("ratechange",this.ij),this.Ni("seeked",this.jj),this.Ni("seeking",this.kj),this.Ni("ended",this.lj),this.Ni("volumechange",this.vd),this.Ni("waiting",this.mj)),this.Si=!0)}Ni(t,i){return(0,s.l)(this.Ba,t,i.bind(this))}qj(t){}Oi(t,i){this.Wc.Nb("time-update",{detail:{currentTime:Math.min(t,this.zi.$state.seekableEnd()),played:this.Ba.played},trigger:i})}Kf(t){3!==this.Ba.networkState?(this._i(),this.Wc.Nb("load-start",{trigger:t})):this.Ui(t)}Ui(t){this.Wc.Nb("abort",{trigger:t})}Zi(){this.Wc.Nb("emptied",{trigger:event})}$i(t){this.Wc.Nb("loaded-data",{trigger:t})}aj(t){this.gj(),this.Wc.Nb("volume-change",{detail:{volume:this.Ba.volume,muted:this.Ba.muted}}),this.Wc.Nb("loaded-metadata",{trigger:t}),a.f&&(0,a.g)(this.zi.$state.source())&&this.Wc.Dg(this.Ti(),t)}Ti(){return{duration:this.Ba.duration,buffered:this.Ba.buffered,seekable:this.Ba.seekable}}qa(t){this.zi.$state.canPlay&&this.Wc.Nb("play",{trigger:t})}ra(t){(1!==this.Ba.readyState||this.Pi)&&(this.Pi=!1,this.Qi.vc(),this.Wc.Nb("pause",{trigger:t}))}hd(t){this.Wc.Dg(this.Ti(),t)}bj(t){this.zi.$state.started()||this.Wc.Nb("can-play-through",{trigger:t,detail:this.Ti()})}hj(t){this.Pi=!1,this.Wc.Nb("playing",{trigger:t}),this.Qi.uc()}ej(t){this.Wc.Nb("stalled",{trigger:t}),this.Ba.readyState<3&&(this.Pi=!0,this.Wc.Nb("waiting",{trigger:t}))}mj(t){this.Ba.readyState<3&&(this.Pi=!0,this.Wc.Nb("waiting",{trigger:t}))}lj(t){this.Qi.vc(),this.Oi(this.Ba.duration,t),this.Wc.Nb("end",{trigger:t}),this.zi.$state.loop()?this.nj():this.Wc.Nb("ended",{trigger:t})}Yi(){this.zi.$state.paused()&&(0,s.l)(this.Ba,"timeupdate",this.oj.bind(this))}oj(t){this.Oi(this.Ba.currentTime,t)}cj(t){this.zi.$state.ended()&&this.Oi(this.Ba.duration,t),this.Wc.Nb("duration-change",{detail:this.Ba.duration,trigger:t})}vd(t){this.Wc.Nb("volume-change",{detail:{volume:this.Ba.volume,muted:this.Ba.muted},trigger:t})}jj(t){this.Oi(this.Ba.currentTime,t),this.Wc.Nb("seeked",{detail:this.Ba.currentTime,trigger:t}),Math.trunc(this.Ba.currentTime)===Math.trunc(this.Ba.duration)&&(0,a.h)(this.Ba.duration)>(0,a.h)(this.Ba.currentTime)&&(this.Oi(this.Ba.duration,t),this.Ba.ended||this.zi.player.dispatch(new s.D("media-play-request",{trigger:t})))}kj(t){this.Wc.Nb("seeking",{detail:this.Ba.currentTime,trigger:t})}dj(t){this.Wc.Nb("progress",{detail:{buffered:this.Ba.buffered,seekable:this.Ba.seekable},trigger:t})}nj(){(0,s.f)(this.Ba.controls)&&(this.Ba.controls=!1),this.zi.player.dispatch(new s.D("media-loop-request"))}fj(t){this.Wc.Nb("suspend",{trigger:t})}ij(t){this.Wc.Nb("rate-change",{detail:this.Ba.playbackRate,trigger:t})}od(t){const i=this.Ba.error;i&&this.Wc.Nb("error",{detail:{message:i.message,code:i.code,mediaError:i},trigger:t})}}class n{constructor(t,i){this.Wb=t,this.R=i,this.rj.onaddtrack=this.tj.bind(this),this.rj.onremovetrack=this.uj.bind(this),this.rj.onchange=this.vj.bind(this),(0,s.l)(this.R.audioTracks,"change",this.wj.bind(this))}get rj(){return this.Wb.media.audioTracks}tj(t){const i=t.track;if(""===i.label)return;const e={id:i.id+"",label:i.label,language:i.language,kind:i.kind,selected:!1};this.R.audioTracks[a.L.h](e,t),i.enabled&&(e.selected=!0)}uj(t){const i=this.R.audioTracks.getById(t.track.id);i&&this.R.audioTracks[a.L.f](i,t)}vj(t){let i=this.sj();if(!i)return;const e=this.R.audioTracks.getById(i.id);e&&this.R.audioTracks[a.L.$](e,!0,t)}sj(){return Array.from(this.rj).find((t=>t.enabled))}wj(t){const{current:i}=t.detail;if(!i)return;const e=this.rj.getTrackById(i.id);if(e){const t=this.sj();t&&(t.enabled=!1),e.enabled=!0}}}class d{constructor(t){this.Ba=t,this.scope=(0,s.g)(),this.jg=null}setup(t){new h(this,t),"audioTracks"in this.media&&new n(this,t),(0,s.o)((()=>{this.Ba.setAttribute("src",""),this.Ba.load()}))}get type(){return""}get media(){return this.Ba}get currentSrc(){return this.jg}get paused(){return this.Ba.paused}get muted(){return this.Ba.muted}set muted(t){this.Ba.muted=t}get volume(){return this.Ba.volume}set volume(t){this.Ba.volume=t}get currentTime(){return this.Ba.currentTime}set currentTime(t){this.Ba.currentTime=t}get playsinline(){return this.Ba.hasAttribute("playsinline")}set playsinline(t){(0,s.h)(this.Ba,"playsinline",t)}get playbackRate(){return this.Ba.playbackRate}set playbackRate(t){this.Ba.playbackRate=t}async play(){return this.Ba.play()}async pause(){return this.Ba.pause()}async loadSource(t,i){let{src:e,type:r}=t;this.Ba.preload=i||"",(0,a.j)(e)?this.Ba.srcObject=e:(this.Ba.srcObject=null,this.Ba.src=(0,s.a)(e)?e:window.URL.createObjectURL(e)),this.Ba.load(),this.jg={src:e,type:r}}}},437:(t,i,e)=>{e.r(i),e.d(i,{HLSProvider:()=>c});var s=e(4245),a=e(6398),r=e(9209),h=e(4596);e(2791),e(4164);class n{constructor(t){this.xa=t,this.Ja=null,this.Ai=null,this.ig={},this.H=new Set}get instance(){return this.Ja}setup(t,i){this.zi=i;const e=(0,s.p)(i.$state.streamType).includes("live"),r=(0,s.p)(i.$state.streamType).includes("ll-");this.Ja=new t({lowLatencyMode:r,backBufferLength:r?4:e?8:void 0,renderTextTracksNatively:!1,...this.ig});const h=this.Bi.bind(this);for(const s of Object.values(t.Events))this.Ja.on(s,h);this.Ja.on(t.Events.ERROR,this.od.bind(this));for(const s of this.H)s(this.Ja);i.player.dispatch(new s.D("hls-instance",{detail:this.Ja})),this.Ja.attachMedia(this.xa),this.Ja.on(t.Events.AUDIO_TRACK_SWITCHED,this.Ci.bind(this)),this.Ja.on(t.Events.LEVEL_SWITCHED,this.Di.bind(this)),this.Ja.on(t.Events.LEVEL_LOADED,this.Ei.bind(this)),this.Ja.on(t.Events.NON_NATIVE_TEXT_TRACKS_FOUND,this.Fi.bind(this)),this.Ja.on(t.Events.CUES_PARSED,this.Gi.bind(this)),i.qualities[a.Q.pb]=this.Hi.bind(this),(0,s.l)(i.qualities,"change",this.th.bind(this)),(0,s.l)(i.audioTracks,"change",this.Ii.bind(this)),this.Ai=(0,s.e)(this.Ji.bind(this))}Ji(){if(!this.zi.$state.live())return;const t=new h.R(this.Ki.bind(this));return t.uc(),t.vc.bind(t)}Ki(){var t,i;this.zi.$state.liveSyncPosition.set(null!==(t=null===(i=this.Ja)||void 0===i?void 0:i.liveSyncPosition)&&void 0!==t?t:1/0)}Bi(t,i){var e,a;null===(e=this.zi.player)||void 0===e||e.dispatch(new s.D((a=t,(0,s.c)(a)),{detail:i}))}Fi(t,i){const e=new s.D(t,{detail:i});let r=-1;for(let s=0;s<i.tracks.length;s++){var h;const t=i.tracks[s],n=null!==(h=t.subtitleTrack)&&void 0!==h?h:t.closedCaptions,d=new a.T({id:"hls-".concat(t.kind).concat(s),src:null===n||void 0===n?void 0:n.url,label:t.label,language:null===n||void 0===n?void 0:n.lang,kind:t.kind});d[a.a.Na]=2,d[a.a.$a]=()=>{"showing"===d.mode?(this.Ja.subtitleTrack=s,r=s):r===s&&(this.Ja.subtitleTrack=-1,r=-1)},t.default&&d.setMode("showing",e),this.zi.textTracks.add(d,e)}}Gi(t,i){const e=this.zi.textTracks.getById("hls-".concat(i.track));if(!e)return;const a=new s.D(t,{detail:i});for(const s of i.cues)s.positionAlign="auto",e.addCue(s,a)}Ci(t,i){const e=this.zi.audioTracks[i.id];e&&this.zi.audioTracks[a.L.$](e,!0,new s.D(t,{detail:i}))}Di(t,i){const e=this.zi.qualities[i.level];e&&this.zi.qualities[a.L.$](e,!0,new s.D(t,{detail:i}))}Ei(t,i){if(this.zi.$state.canPlay())return;const{type:e,live:r,totalduration:h,targetduration:n}=i.details,d=new s.D(t,{detail:i});this.zi.delegate.Nb("stream-type-change",{detail:r?"EVENT"===e&&Number.isFinite(h)&&n>=10?"live:dvr":"live":"on-demand",trigger:d}),this.zi.delegate.Nb("duration-change",{detail:h,trigger:d});const c=this.Ja.media;-1===this.Ja.currentLevel&&this.zi.qualities[a.Q.ob](!0,d);for(const s of this.Ja.audioTracks)this.zi.audioTracks[a.L.h]({id:s.id+"",label:s.name,language:s.lang||"",kind:"main"},d);for(const s of this.Ja.levels)this.zi.qualities[a.L.h]({width:s.width,height:s.height,codec:s.codecSet,bitrate:s.bitrate},d);c.dispatchEvent(new s.D("canplay",{trigger:d}))}od(t,i){var e,s,a;if(i.fatal)switch(i.type){case"networkError":null===(e=this.Ja)||void 0===e||e.startLoad();break;case"mediaError":null===(s=this.Ja)||void 0===s||s.recoverMediaError();break;default:null===(a=this.Ja)||void 0===a||a.destroy(),this.Ja=null}}Hi(){this.Ja&&(this.Ja.currentLevel=-1)}th(){const{qualities:t}=this.zi;this.Ja&&!t.auto&&(this.Ja[t.switch+"Level"]=t.selectedIndex,a.I&&(this.xa.currentTime=this.xa.currentTime))}Ii(){const{audioTracks:t}=this.zi;this.Ja&&this.Ja.audioTrack!==t.selectedIndex&&(this.Ja.audioTrack=t.selectedIndex)}N(){var t,i;this.zi&&(this.zi.qualities[a.Q.pb]=void 0),null===(t=this.Ja)||void 0===t||t.destroy(),this.Ja=null,null===(i=this.Ai)||void 0===i||i.call(this),this.Ai=null}}class d{constructor(t,i,e){this.zf=t,this.zi=i,this.Bg=e,this.Li()}async Li(){const t={onLoadStart:this.Kf.bind(this),onLoaded:this.Vf.bind(this),onLoadError:this.Mi.bind(this)};let i=await async function(t){var i;let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(0,s.a)(t))return;null===(i=e.onLoadStart)||void 0===i||i.call(e);try{var r;if(await(0,a.l)(t),!(0,s.b)(window.Hls))throw Error("");const i=window.Hls;return null===(r=e.onLoaded)||void 0===r||r.call(e,i),i}catch(n){var h;null===(h=e.onLoadError)||void 0===h||h.call(e,n)}return}(this.zf,t);if((0,s.i)(i)&&!(0,s.a)(this.zf)&&(i=await async function(t){var i;let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((0,s.i)(t))return;if(null===(i=e.onLoadStart)||void 0===i||i.call(e),t.prototype&&t.prototype!==Function){var a;return null===(a=e.onLoaded)||void 0===a||a.call(e,t),t}try{var r;const i=null===(r=await t())||void 0===r?void 0:r.default;if(!i||!i.isSupported)throw Error("");var h;return null===(h=e.onLoaded)||void 0===h||h.call(e,i),i}catch(d){var n;null===(n=e.onLoadError)||void 0===n||n.call(e,d)}return}(this.zf,t)),!i)return null;if(!i.isSupported()){const t="[vidstack]: `hls.js` is not supported in this environment";return this.zi.player.dispatch(new s.D("hls-unsupported")),this.zi.delegate.Nb("error",{detail:{message:t,code:4}}),null}return i}Kf(){this.zi.player.dispatch(new s.D("hls-lib-load-start"))}Vf(t){this.zi.player.dispatch(new s.D("hls-lib-loaded",{detail:t})),this.Bg(t)}Mi(t){const i=(0,a.c)(t);this.zi.player.dispatch(new s.D("hls-lib-load-error",{detail:i})),this.zi.delegate.Nb("error",{detail:{message:i.message,code:4}})}}class c extends r.VideoProvider{constructor(){super(...arguments),this.$$PROVIDER_TYPE="HLS",this.hg=null,this.af=new n(this.video),this.gg="".concat("https://cdn.jsdelivr.net","/npm/hls.js@^1.0.0/dist/hls",".min.js")}get ctor(){return this.hg}get instance(){return this.af.instance}get type(){return"hls"}get canLiveSync(){return!0}get config(){return this.af.ig}set config(t){this.af.ig=t}get library(){return this.gg}set library(t){this.gg=t}preconnect(){(0,s.a)(this.gg)&&(0,a.p)(this.gg)}setup(t){super.setup(t),new d(this.gg,t,(i=>{this.hg=i,this.af.setup(i,t),t.delegate.Nb("provider-setup",{detail:this});const e=(0,s.p)(t.$state.source);e&&this.loadSource(e)}))}async loadSource(t,i){var e;(0,s.a)(t.src)&&(this.Ba.preload=i||"",null===(e=this.af.instance)||void 0===e||e.loadSource(t.src),this.jg=t)}onInstance(t){const i=this.af.instance;return i&&t(i),this.af.H.add(t),()=>this.af.H.delete(t)}destroy(){this.af.N()}}c.supported=(0,a.i)()},9209:(t,i,e)=>{e.r(i),e.d(i,{VideoProvider:()=>l});var s=e(4245),a=e(6398),r=e(4596);e(2791),e(4164);class h{constructor(t,i){this.xa=t,this.R=i,t.textTracks.onaddtrack=this.Da.bind(this),(0,s.o)(this.si.bind(this))}Da(t){const i=t.track;if(!i||function(t,i){return Array.from(t.children).find((t=>t.track===i))}(this.xa,i))return;const e=new a.T({id:i.id,kind:i.kind,label:i.label,language:i.language,type:"vtt"});e[a.a.Va]={track:i},e[a.a.Na]=2,e[a.a.Ha]=!0;let s=0;const r=t=>{if(i.cues)for(let a=s;a<i.cues.length;a++)e.addCue(i.cues[a],t),s++};r(t),i.oncuechange=r,this.R.textTracks.add(e,t),e.setMode(i.mode,t)}si(){this.xa.textTracks.onaddtrack=null;for(const i of this.R.textTracks){var t;const e=null===(t=i[a.a.Va])||void 0===t?void 0:t.track;null!==e&&void 0!==e&&e.oncuechange&&(e.oncuechange=null)}}}class n{constructor(t,i){this.xa=t,this.Ba=i,this.oa=(t,i)=>{this.Ba.delegate.Nb("picture-in-picture-change",{detail:t,trigger:i})},(0,s.l)(this.xa,"enterpictureinpicture",this.ti.bind(this)),(0,s.l)(this.xa,"leavepictureinpicture",this.ui.bind(this))}get active(){return document.pictureInPictureElement===this.xa}get supported(){return(0,a.b)(this.xa)}async enter(){return this.xa.requestPictureInPicture()}exit(){return document.exitPictureInPicture()}ti(t){this.oa(!0,t)}ui(t){this.oa(!1,t)}}class d{constructor(t,i){this.xa=t,this.Ba=i,this.Ra="inline",(0,s.l)(this.xa,"webkitpresentationmodechanged",this.$a.bind(this))}get xi(){return(0,a.d)(this.xa)}async wi(t){this.Ra!==t&&this.xa.webkitSetPresentationMode(t)}$a(){var t;const i=this.Ra;this.Ra=this.xa.webkitPresentationMode,null===(t=this.Ba.player)||void 0===t||t.dispatch(new s.D("video-presentation-change",{detail:this.Ra,trigger:event})),["fullscreen","picture-in-picture"].forEach((t=>{this.Ra!==t&&i!==t||this.Ba.delegate.Nb("".concat(t,"-change"),{detail:this.Ra===t,trigger:event})}))}}class c{constructor(t){this.vi=t}get active(){return"fullscreen"===this.vi.Ra}get supported(){return this.vi.xi}async enter(){this.vi.wi("fullscreen")}async exit(){this.vi.wi("inline")}}class o{constructor(t){this.vi=t}get active(){return"picture-in-picture"===this.vi.Ra}get supported(){return this.vi.xi}async enter(){this.vi.wi("picture-in-picture")}async exit(){this.vi.wi("inline")}}class l extends r.H{constructor(t,i){super(t),this.$$PROVIDER_TYPE="VIDEO",(0,s.s)((()=>{if((0,a.d)(t)){const e=new d(t,i);this.fullscreen=new c(e),this.pictureInPicture=new o(e)}else(0,a.b)(t)&&(this.pictureInPicture=new n(t,i))}),this.scope)}get type(){return"video"}setup(t){super.setup(t),(0,a.e)(this.video)&&new h(this.video,t),t.textRenderers.Ga(this.video),(0,s.o)((()=>{t.textRenderers.Ga(null)})),"video"===this.type&&t.delegate.Nb("provider-setup",{detail:this})}get video(){return this.Ba}}}}]);
//# sourceMappingURL=437.3a94713c.chunk.js.map