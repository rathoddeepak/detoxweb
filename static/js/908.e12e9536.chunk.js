"use strict";(self.webpackChunkdetoxweb=self.webpackChunkdetoxweb||[]).push([[908],{5908:(e,t,s)=>{s.r(t),s.d(t,{SSAParser:()=>d,default:()=>g});var a=s(4572),i=s(2789);const r=/^Format:[\s\t]*/,n=/^Style:[\s\t]*/,l=/^Dialogue:[\s\t]*/,c=/[\s\t]*,[\s\t]*/,o=/\{[^}]+\}/g,h=/\\N/g,u=/^\[(.*)[\s\t]?Styles\]$/,p=/^\[(.*)[\s\t]?Events\]$/;class d{constructor(){(0,a.Z)(this,"f",void 0),(0,a.Z)(this,"O",0),(0,a.Z)(this,"a",null),(0,a.Z)(this,"j",[]),(0,a.Z)(this,"k",[]),(0,a.Z)(this,"N",null),(0,a.Z)(this,"d",void 0),(0,a.Z)(this,"P",{})}async init(e){this.f=e,e.errors&&(this.d=(await s.e(223).then(s.bind(s,9223))).ParseErrorBuilder)}parse(e,t){if(this.O)switch(this.O){case 1:if(""===e)this.O=0;else if(n.test(e))if(this.N){const t=e.replace(n,"").split(c);this.S(t)}else{var s;this.e(null===(s=this.d)||void 0===s?void 0:s.T("Style",t))}else r.test(e)?this.N=e.replace(r,"").split(c):p.test(e)&&(this.N=null,this.O=2);break;case 2:if(""===e)this.Q();else if(l.test(e))if(this.Q(),this.N){const s=e.replace(l,"").split(c),a=this.U(s,t);a&&(this.a=a)}else{var a;this.e(null===(a=this.d)||void 0===a?void 0:a.T("Dialogue",t))}else this.a?this.a.text+="\n"+e.replace(o,"").replace(h,"\n"):r.test(e)?this.N=e.replace(r,"").split(c):u.test(e)?(this.N=null,this.O=1):p.test(e)&&(this.N=null)}else""===e||(u.test(e)?(this.N=null,this.O=1):p.test(e)&&(this.N=null,this.O=2))}done(){return{metadata:{},cues:this.j,regions:[],errors:this.k}}Q(){var e,t;this.a&&(this.j.push(this.a),null===(e=(t=this.f).onCue)||void 0===e||e.call(t,this.a),this.a=null)}S(e){let t,s,a,i,r="Default",n={},l="center",c="bottom",o=1.2,h=3,u=[];for(let d=0;d<this.N.length;d++){const p=this.N[d],b=e[d];switch(p){case"Name":r=b;break;case"Fontname":n["font-family"]=b;break;case"Fontsize":n["font-size"]="calc(".concat(b," / var(--overlay-height))");break;case"PrimaryColour":const e=f(b);e&&(n["--cue-color"]=e);break;case"BorderStyle":h=parseInt(b,10);break;case"BackColour":i=f(b);break;case"OutlineColour":const p=f(b);p&&(a=p);break;case"Bold":parseInt(b)&&(n["font-weight"]="bold");break;case"Italic":parseInt(b)&&(n["font-style"]="italic");break;case"Underline":parseInt(b)&&(n["text-decoration"]="underline");break;case"StrikeOut":parseInt(b)&&(n["text-decoration"]="line-through");break;case"Spacing":n["letter-spacing"]=b+"px";break;case"AlphaLevel":n.opacity=parseFloat(b);break;case"ScaleX":u.push("scaleX(".concat(parseFloat(b)/100,")"));break;case"ScaleY":u.push("scaleY(".concat(parseFloat(b)/100,")"));break;case"Angle":u.push("rotate(".concat(b,"deg)"));break;case"Shadow":o=1.2*parseInt(b,10);break;case"MarginL":n["--cue-width"]="auto",n["--cue-left"]=parseFloat(b)+"px";break;case"MarginR":n["--cue-width"]="auto",n["--cue-right"]=parseFloat(b)+"px";break;case"MarginV":s=parseFloat(b);break;case"Outline":t=parseInt(b,10);break;case"Alignment":const d=parseInt(b,10);switch(d>=4&&(c=d>=7?"top":"center"),d%3){case 1:l="start";break;case 2:l="center";break;case 3:l="end"}}}if(n.R=c,n["--cue-white-space"]="normal",n["--cue-line-height"]="normal",n["--cue-text-align"]=l,"center"===c?(n["--cue-top"]="50%",u.push("translateY(-50%)")):n["--cue-".concat(c)]=(s||0)+"px",1===h&&(n["--cue-padding-y"]="0"),(1===h||i)&&(n["--cue-bg-color"]=1===h?"none":i),3===h&&a&&(n["--cue-outline"]="".concat(t,"px solid ").concat(a)),1===h&&"number"===typeof t){var p;const e=null!==(p=i)&&void 0!==p?p:"#000";n["--cue-text-shadow"]=[a&&b(1.2*t,1.2*o,a),a?b(t*(t/2),o*(t/2),e):b(t,o,e)].filter(Boolean).join(", ")}u.length&&(n["--cue-transform"]=u.join(" ")),this.P[r]=n}U(e,t){const s=this.V(e),a=this.o(s.Start,s.End,t);if(!a)return;const r=new i.b(a[0],a[1],""),n={...this.P[s.Style]||{}},l=s.Name?"<v ".concat(s.Name,">"):"",c=n.R,u=s.MarginL&&parseFloat(s.MarginL),p=s.MarginR&&parseFloat(s.MarginR),d=s.MarginV&&parseFloat(s.MarginV);return u&&(n["--cue-width"]="auto",n["--cue-left"]=u+"px"),p&&(n["--cue-width"]="auto",n["--cue-right"]=p+"px"),d&&"center"!==c&&(n["--cue-".concat(c)]=d+"px"),r.text=l+e.slice(this.N.length-1).join(", ").replace(o,"").replace(h,"\n"),delete n.R,Object.keys(n).length&&(r.style=n),r}V(e){const t={};for(let s=0;s<this.N.length;s++)t[this.N[s]]=e[s];return t}o(e,t,s){const a=(0,i.p)(e),r=(0,i.p)(t);if(null!==a&&null!==r&&r>a)return[a,r];var n,l,c;null===a&&this.e(null===(n=this.d)||void 0===n?void 0:n.q(e,s)),null===r&&this.e(null===(l=this.d)||void 0===l?void 0:l.r(t,s)),null!=a&&null!==r&&r>a&&this.e(null===(c=this.d)||void 0===c?void 0:c.s(a,r,s))}e(e){if(e){if(this.k.push(e),this.f.strict)throw this.f.cancel(),e;var t,s;null===(t=(s=this.f).onError)||void 0===t||t.call(s,e)}}}function f(e){const t=parseInt(e.replace("&H",""),16);if(t>=0){return"rgba("+[255&t,t>>8&255,t>>16&255,(t>>24&255^255)/255].join(",")+")"}return null}function b(e,t,s){const a=Math.ceil(2*Math.PI*e);let i="";for(let r=0;r<a;r++){const n=2*Math.PI*r/a;i+=e*Math.cos(n)+"px "+t*Math.sin(n)+"px 0 "+s+(r==a-1?"":",")}return i}function g(){return new d}}}]);
//# sourceMappingURL=908.e12e9536.chunk.js.map